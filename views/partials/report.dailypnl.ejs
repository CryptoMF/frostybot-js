<div id="pnlchartcontainer" style="height: 600px;"></div>


<script src="/scripts/notifications.js"></script>
<script src="/scripts/api.js"></script>
<!--script src="https://code.jquery.com/jquery-3.5.1.min.js"></script-->
  
<script type="text/javascript">
  
   $(document).ready(function () {
        // prepare the data

        var token = localStorage.getItem("token");
        var uuid = token.uuid;
        var stub = "<%= report_dailypnl.stub %>";
        var days = "<%= report_dailypnl.days %>";



        var params = {
            token: JSON.parse(token),
            stub: stub,
            days: days
        };

        jQuery.getJSON({
            url: "/ui/data/chartdata_dailypnl",
            data: params,
            success: function(result) {

                if (result.length > 0) {
                    var months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
                    var settings = {
                        title: "PNL Per Day",
                        description: "",
                        enableAnimations: true,
                        showLegend: false,
                        padding: { left: 5, top: 5, right: 25, bottom: 5 },
                        titlePadding: { left: 90, top: 0, right: 0, bottom: 10 },
                        source: result,
                        xAxis: {
                            dataField: 'Date',
                            formatFunction: function (value) {
                                return value.getDate() + '-' + months[value.getMonth()];
                            },
                            type: 'date',
                            baseUnit: 'day',
                            //unitInterval: 1,
                            tickMarks: {
                                visible: true,
                                interval: 1
                            },
                            gridLines: {
                                visible: false,
                                interval: 1
                            }                       
                        },
                        colorScheme: 'scheme02',
                        seriesGroups: [
                            {
                                type: 'column',
                                valueAxis: {
                                    maxValue: result[result.length - 1].Total / (2 * 3),
                                    displayValueAxis: true,
                                    visible: true,
                                    //unitInterval: 1,
                                    description: 'Daily PNL ($)',
                                    gridLines: { 
                                        visible: false,
                                    }
                                },
                                series: [
                                    {dataField: 'Daily', displayText: 'Daily PNL'}
                                ]
                            },
                            {
                                type: 'line',
                                valueAxis: {
                                    displayValueAxis: true,
                                    visible: true,
                                    //unitInterval: 1,
                                    position: 'right',
                                    description: 'Cumulative PNL ($)',
                                    gridLines: { 
                                        visible: false,
                                    }
                                },
                                series: [
                                    {dataField: 'Total', displayText: 'Cumulative PNL'}
                                ]
                            }
                        ]
                    };
                    
                    $('#pnlchartcontainer').jqxChart(settings);

                }

            }
        });

    });
</script>